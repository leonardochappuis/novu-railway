FROM ghcr.io/novuhq/novu/api:0.19.0

ARG NODE_ENV
ARG API_ROOT_URL
ARG DISABLE_USER_REGISTRATION
ARG PORT
ARG FRONT_BASE_URL
ARG MONGO_URL
ARG MONGO_MIN_POOL_SIZE
ARG MONGO_MAX_POOL_SIZE
ARG REDIS_HOST
ARG REDIS_PORT
ARG REDIS_PASSWORD
ARG REDIS_DB_INDEX
ARG REDIS_CACHE_SERVICE_HOST
ARG REDIS_CACHE_SERVICE_PORT
ARG S3_LOCAL_STACK
ARG S3_BUCKET_NAME
ARG S3_REGION
ARG AWS_ACCESS_KEY_ID
ARG AWS_SECRET_ACCESS_KEY
ARG JWT_SECRET
ARG STORE_ENCRYPTION_KEY
ARG SENTRY_DSN
ARG NEW_RELIC_APP_NAME
ARG NEW_RELIC_LICENSE_KEY
ARG API_CONTEXT_PATH

ENV NODE_ENV=${NODE_ENV}
ENV API_ROOT_URL=${API_ROOT_URL}
ENV DISABLE_USER_REGISTRATION=${DISABLE_USER_REGISTRATION}
ENV PORT=${API_PORT}
ENV FRONT_BASE_URL=${FRONT_BASE_URL}
ENV MONGO_URL=${MONGO_URL}
ENV MONGO_MIN_POOL_SIZE=${MONGO_MIN_POOL_SIZE}
ENV MONGO_MAX_POOL_SIZE=${MONGO_MAX_POOL_SIZE}
ENV REDIS_HOST=${REDIS_HOST}
ENV REDIS_PORT=${REDIS_PORT}
ENV REDIS_PASSWORD=${REDIS_PASSWORD}
ENV REDIS_DB_INDEX=2
ENV REDIS_CACHE_SERVICE_HOST=${REDIS_CACHE_SERVICE_HOST}
ENV REDIS_CACHE_SERVICE_PORT=${REDIS_CACHE_SERVICE_PORT}
ENV S3_LOCAL_STACK=${S3_LOCAL_STACK}
ENV S3_BUCKET_NAME=${S3_BUCKET_NAME}
ENV S3_REGION=${S3_REGION}
ENV AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
ENV AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
ENV JWT_SECRET=${JWT_SECRET}
ENV STORE_ENCRYPTION_KEY=${STORE_ENCRYPTION_KEY}
ENV SENTRY_DSN=${SENTRY_DSN}
ENV NEW_RELIC_APP_NAME=${NEW_RELIC_APP_NAME}
ENV NEW_RELIC_LICENSE_KEY=${NEW_RELIC_LICENSE_KEY}
ENV API_CONTEXT_PATH=${API_CONTEXT_PATH}

EXPOSE 3000